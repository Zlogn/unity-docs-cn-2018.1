<!DOCTYPE html><html class="no-js" lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-5V25JL6');
    </script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<meta property="og:title" content="Unity Analytics DataPrivacy API - Unity 手册">
<title>Unity Analytics DataPrivacy API - Unity 手册</title>
<meta name="description" content="DataPrivacy 类根据玩家的数据隐私管理选项来配置 Unity Analytics 服务。">
<meta property="og:description" content="DataPrivacy 类根据玩家的数据隐私管理选项来配置 Unity Analytics 服务。">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="../StaticFiles/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png">
<script>
      var docs_type = 'Manual';
      var lang = 'cn';
      var page = 'UnityAnalyticsDataPrivacyAPI';
      if(!page) page = 'index';
      var version = '2018.1';
      var docs_versions = [{version: '2019.3',version_string: '2019.3'},{version: '2019.2',version_string: '2019.2'},{version: '2019.1',version_string: '2019.1'},{version: '2018.4',version_string: '2018.4'},{version: '2018.3',version_string: '2018.3'},{version: '2018.2',version_string: '2018.2'},{version: '2018.1',version_string: '2018.1'},{version: '2017.4',version_string: '2017.4'},{version: '2017.3',version_string: '2017.3'},{version: '2017.2',version_string: '2017.2'},{version: '2017.1',version_string: '2017.1'},{version: '5.6',version_string: '560'},];</script><script type="text/javascript" src="../StaticFiles/js/jquery.js"></script><script type="text/javascript" src="../StaticFiles/js/core.js"></script><script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src=""></script><script type="text/javascript" src="../StaticFiles/js/custom.js"></script><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css">
<link rel="canonical" href="https://docs.unity3d.com/cn/2018.1/Manual/UnityAnalyticsDataPrivacyAPI.html">
<link rel="alternate" href="https://docs.unity3d.com/en/2018.1/Manual/UnityAnalyticsDataPrivacyAPI.html" hreflang="en">
<link rel="alternate" href="https://docs.unity3d.com/ja/2018.1/Manual/UnityAnalyticsDataPrivacyAPI.html" hreflang="ja">
<link rel="alternate" href="https://docs.unity3d.com/es/2018.1/Manual/UnityAnalyticsDataPrivacyAPI.html" hreflang="es">
<link rel="alternate" href="https://docs.unity3d.com/kr/2018.1/Manual/UnityAnalyticsDataPrivacyAPI.html" hreflang="ko">
<link rel="alternate" href="https://docs.unity3d.com/ru/2018.1/Manual/UnityAnalyticsDataPrivacyAPI.html" hreflang="ru">
<link rel="alternate" href="https://docs.unity3d.com/2018.1/Documentation/Manual/UnityAnalyticsDataPrivacyAPI.html" hreflang="x-default">
</head>
<body>
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="搜索手册..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul class="menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">
                unity3d.com
              </a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2018.1</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;"><ul>
<li><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/UnityAnalyticsDataPrivacyAPI.html">2019.3</a></li>
<li><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/UnityAnalyticsDataPrivacyAPI.html">2019.2</a></li>
<li><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/UnityAnalyticsDataPrivacyAPI.html">2019.1</a></li>
<li><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/UnityAnalyticsDataPrivacyAPI.html">2018.4</a></li>
<li><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/UnityAnalyticsDataPrivacyAPI.html">2018.3</a></li>
<li><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/UnityAnalyticsDataPrivacyAPI.html">2018.2</a></li>
<li><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/UnityAnalyticsDataPrivacyAPI.html">2018.1</a></li>
<li><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/UnityAnalyticsDataPrivacyAPI.html">2017.4</a></li>
<li><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/UnityAnalyticsDataPrivacyAPI.html">2017.3</a></li>
<li><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/UnityAnalyticsDataPrivacyAPI.html">2017.2</a></li>
<li><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/UnityAnalyticsDataPrivacyAPI.html">2017.1</a></li>
<li><a class="docs_version_url_560" href="/cn/560/Manual/UnityAnalyticsDataPrivacyAPI.html">5.6</a></li>
</ul></div>
</div>
<ul class="nav-menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">语言:
        <span class="b">中文</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a data-lang="en" href="/2018.1/Documentation/Manual/UnityAnalyticsDataPrivacyAPI.html">English</a></li>
<li><a data-lang="ja" href="/ja/2018.1/Manual/UnityAnalyticsDataPrivacyAPI.html">日本語</a></li>
<li><a data-lang="es" href="/es/2018.1/Manual/UnityAnalyticsDataPrivacyAPI.html">Español</a></li>
<li><a data-lang="kr" href="/kr/2018.1/Manual/UnityAnalyticsDataPrivacyAPI.html">한국어</a></li>
<li><a data-lang="ru" href="/ru/2018.1/Manual/UnityAnalyticsDataPrivacyAPI.html">Русский</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar hidden"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc">
<h2>手册</h2>
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2018.1</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;"><ul>
<li><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/UnityAnalyticsDataPrivacyAPI.html">2019.3</a></li>
<li><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/UnityAnalyticsDataPrivacyAPI.html">2019.2</a></li>
<li><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/UnityAnalyticsDataPrivacyAPI.html">2019.1</a></li>
<li><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/UnityAnalyticsDataPrivacyAPI.html">2018.4</a></li>
<li><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/UnityAnalyticsDataPrivacyAPI.html">2018.3</a></li>
<li><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/UnityAnalyticsDataPrivacyAPI.html">2018.2</a></li>
<li><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/UnityAnalyticsDataPrivacyAPI.html">2018.1</a></li>
<li><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/UnityAnalyticsDataPrivacyAPI.html">2017.4</a></li>
<li><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/UnityAnalyticsDataPrivacyAPI.html">2017.3</a></li>
<li><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/UnityAnalyticsDataPrivacyAPI.html">2017.2</a></li>
<li><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/UnityAnalyticsDataPrivacyAPI.html">2017.1</a></li>
<li><a class="docs_version_url_560" href="/cn/560/Manual/UnityAnalyticsDataPrivacyAPI.html">5.6</a></li>
</ul></div>
</div>
<div class="clear"></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap opened-sidebar"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity 用户手册 (2018.1)</a></li>
<li><a href="UnityServices.html">Unity 服务</a></li>
<li><a href="UnityAnalytics.html">Unity Analytics</a></li>
<li><a href="UnityAnalyticsDataPrivacy.html">Unity Analytics 和欧盟一般数据保护条例 (GDPR)</a></li>
<li>Unity Analytics DataPrivacy API</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UnityAnalyticsDataPrivacy.html"></a></span><div class="tip">Unity Analytics 和欧盟一般数据保护条例 (GDPR)</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UnityAnalyticsTerminology.html"></a></span><div class="tip">Analytics 指标、细分段和术语</div>
</div>
</div></div>
<h1>Unity Analytics DataPrivacy API</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p><code>DataPrivacy</code> 类根据玩家的数据隐私管理选项来配置 Unity Analytics 服务。</p>

<p>NAMESPACE: <code>UnityEngine.Analytics</code></p>

<pre><code>    public class DataPrivacy
</code></pre>

<p><code>DataPrivacy</code> 类自动获取玩家的数据隐私状态，并相应配置 Analytics 服务。</p>

<p>使用 <code>FetchPrivacyUrl()</code> 函数来获取玩家个人数据管理页面的 URL。打开该 URL 即可为玩家提供管理其数据隐私设置的选项。</p>

<p>This page details three functions:</p>

<ul>
<li>
<a href="#init">Initialize()</a> - Prepares the Data Privacy API for use.</li>
<li>
<a href="#optout">FetchOptOutStatus(Action&lt;bool&gt;)</a> - Fetches the player’s current opt-out status and configures the Unity Analytics service.</li>
<li>
<a href="#privacyurl">FetchPrivacyUrl(Action&lt;String&gt;, Action&lt;String&gt;)</a> - 获取玩家个人数据管理页面的 URL。</li>
</ul>

<p><a name="init"></a></p>

<h2>Initialize()</h2>

<p>准备 Data Privacy API 以供使用。</p>

<h3>声明</h3>

<pre><code>    public static void Initialize()
</code></pre>

<h3>详细信息</h3>

<p>此函数会创建一个隐藏的游戏对象，并会将 <code>DataPrivacy</code> 类的实例作为组件添加到该游戏对象。</p>

<p>在 Unity 5.1 或更早版本中，应在应用程序启动时尽早调用 <code>Initialize()</code>（理想情况下是在调用 <code>UnityAnalytics.StartSDK (projectId)</code> 之后立即进行）。更高版本的 Unity 会自动调用 <code>Initialize()</code>。</p>

<p><a name="optout"></a></p>

<h2>FetchOptOutStatus(Action&lt;bool&gt;)</h2>

<p>Fetches the player’s current opt-out status and configures the Unity Analytics service.</p>

<h3>声明</h3>

<pre><code>    public static void FetchOptOutStatus(Action&lt;bool&gt; optOutAction = null)
</code></pre>

<h3>参数</h3>

<ul>
<li>[optional] <code>Action&lt;bool&gt; optOutAction</code> — The Action object to invoke when Unity has fetched the player’s opt-out status. The boolean parameter passed to your Action is <code>true</code> if the player has opted out of personal data collection, and <code>false</code> if they have not.</li>
</ul>

<h3>详细信息</h3>

<p>The function configures the Analytics service as appropriate for the player’s data collection choices. Unity caches the status for use when the player’s computer or device is offline.</p>

<p>Unity calls <code>FetchOptOutStatus()</code> automatically when your game launches. You should also call the function when the player returns to your app after closing the data privacy management URL, to immediately apply any changes they made while on that page.</p>

<p>You can also use <code>FetchOptOutStatus()</code> and pass an <code>Action&lt;bool&gt;</code> function parameter to get a player’s opt-out choice. The plug-in invokes the <code>optOutAction</code> function you provide when the network fetch request is complete. The boolean argument passed to your action is <code>true</code> when the player has opted out and <code>false</code>, if they have not. If the network request for the player’s status fails, Unity calls your <code>optOutAction</code> function with the cached value (or <code>false</code>, if the status has never been set).</p>

<pre><code>    void OnOptOutStatus(bool optOut)
    {
        if(optOut)
        {
            Debug.Log("Player has opted-out of personal data collection.");
        }
    }

    // ...
    DataPrivacy.FetchOptOutStatus(OnOptOutStatus);
</code></pre>

<p><a name="privacyurl"></a></p>

<h2>FetchPrivacyUrl(Action&lt;String&gt;, Action&lt;String&gt;)</h2>

<p>获取玩家个人数据管理页面的 URL。</p>

<h3>声明</h3>

<pre><code>    public static void FetchPrivacyUrl(Action&lt;string&gt; success, Action&lt;string&gt; failure = null)
</code></pre>

<h3>参数</h3>

<ul>
<li><p><code>Action&lt;String&gt; success</code> — 成功获取该 URL 时要调用的 Action 对象。传递给 Action 的字符串包含该 URL。</p></li>
<li><p>[optional] <code>Action&lt;String&gt; failure</code> — Unity 无法获取该 URL 时要调用的 Action 对象。传递给 Action 的字符串包含失败原因。</p></li>
</ul>

<h3>详细信息</h3>

<p>Open the URL passed to your <code>success</code> function in a browser or webview to give the player the opportunity to manage their data protection options. Use <code>Application.OpenURL()</code> to open the page.</p>

<p>该 URL 在短时间内有效。务必在打开 URL 之前即时获取 URL。</p>

<p>Call <code>FetchOptOutStatus()</code> after the player returns to your game to apply any changes immediately. Otherwise, Unity applies any changes to data collection the next time the player launches your game.</p>

<hr>

<ul>
<li><span class="page-edit">2018–05–18 Page published with limited <a href="DocumentationEditorialReview.html">editorial review</a>
</span></li>
<li><span class="page-history">删除了用于插入 Data Privacy 按钮的 Editor 菜单命令。添加了 Data Privacy Button 预制件。</span></li>
<li><span class="page-history">Unity 2018.1 中的新功能</span></li>
</ul>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UnityAnalyticsDataPrivacy.html"></a></span><div class="tip">Unity Analytics 和欧盟一般数据保护条例 (GDPR)</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UnityAnalyticsTerminology.html"></a></span><div class="tip">Analytics 指标、细分段和术语</div>
</div>
</div>
</div>
<div class="footer-wrapper">
<div class="footer clear">
<div class="copy">Copyright © 2018 Unity Technologies. Publication 2018.1</div>
<div class="menu">
<a href="https://unity3d.com/learn">教程</a><a href="https://answers.unity3d.com">社区答案</a><a href="https://support.unity3d.com/hc/en-us">知识库</a><a href="https://forum.unity3d.com">论坛</a><a href="https://unity3d.com/asset-store">Asset Store</a>
</div>
</div>
<div></div>
</div>
</div></div></div>
</div>
</body>
</html>
